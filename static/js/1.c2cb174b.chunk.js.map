{"version":3,"sources":["components/TagIndexPage.module.css","components/TagPage.module.css","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/_@babel_runtime@7.8.7@@babel/runtime/helpers/esm/nonIterableRest.js","components/TagIndexPage.js","components/TagPage.js","utils/getTagsFromSiteMap.js","routes/tags.js"],"names":["module","exports","TagIndexPage","TagPage","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_iterableToArrayLimit","TypeError","_nonIterableRest","props","_react_16_13_0_react_default","a","createElement","className","styles","tags","map","tag","key","href","dist_es","name","count","_ref","blogRoot","routes","route","url","ArticleSummary","getTagsFromSiteMap","siteMap","values","from","Set","concat","apply","data","tagRoutes","compose","withContext","req","context","objectSpread","tagsRoot","mountpath","mount","/","title","getView","_getView","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","router","resolveSiteMap","predicate","chunk","pathname","indexOf","sent","fromPairs","toLowerCase","forEach","abrupt","components_TagIndexPage","join","stop","_x","_x2","this","arguments","/:tag","getTitle","params","_getView2","_callee2","lowerCaseTag","_context2","entries","_ref2","find","metaTag","components_TagPage","_x3","_x4"],"mappings":"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","file":"static/js/1.c2cb174b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"TagIndexPage\":\"TagIndexPage_TagIndexPage__1Bbou\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TagPage\":\"TagPage_TagPage__1Kr6T\"};","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React from 'react'\nimport { Link } from 'react-navi'\nimport styles from './TagIndexPage.module.css'\n\nfunction TagIndexPage(props) {\n  return (\n    <div className={styles.TagIndexPage}>\n      <h1>Tags</h1>\n      <ul>\n        {props.tags.map(tag =>\n          <li key={tag.href}>\n            <Link href={tag.href}>{tag.name} ({tag.count})</Link>\n          </li>  \n        )}\n      </ul>\n    </div>\n  )\n}\n\nexport default TagIndexPage","import React from 'react'\nimport ArticleSummary from './ArticleSummary'\nimport styles from './TagPage.module.css'\n\nfunction TagPage({ blogRoot, name, routes }) {\n  return (\n    <div className={styles.TagPage}>\n      <h1>{name} posts</h1>\n      <ul>\n        {routes.map(route =>\n          <li key={route.url.href}>\n            <ArticleSummary blogRoot={blogRoot} route={route} />\n          </li>  \n        )}\n      </ul>\n    </div>\n  )\n}\n\nexport default TagPage","/**\n * Returns an object mapping the URL of each of the site's pages to it's `title`\n * and `meta` objects.\n *\n * This object can be computed at runtime given a `router`, or read from a\n * global `pageDetailsMap` object. This allows for access to the page map during\n * development, while also allowing production builds to use a prebuilt copy.\n */\nfunction getTagsFromSiteMap(siteMap) {\n  let routes = Object.values(siteMap.routes)\n  return Array.from(\n    new Set(\n      [].concat.apply(\n        [],\n        routes.map(route => (route.data && route.data.tags) || []),\n      ),\n    ),\n  )\n}\n\nexport default getTagsFromSiteMap\n","import React from 'react'\nimport { compose, mount, route, withContext } from 'navi'\nimport { join } from 'path'\nimport { fromPairs } from 'lodash'\nimport TagIndexPage from '../components/TagIndexPage'\nimport TagPage from '../components/TagPage'\nimport getTagsFromSiteMap from '../utils/getTagsFromSiteMap'\n\nconst tagRoutes = compose(\n  withContext((req, context) => ({\n    ...context,\n    tagsRoot: req.mountpath,\n  })),\n  mount({\n    '/': route({\n      title: 'Tags',\n\n      getView: async (req, context) => {\n        // Build a list of pages for each tag\n        let siteMap = await req.router.resolveSiteMap(context.blogRoot, {\n          predicate: chunk =>\n            chunk.url.pathname.indexOf(context.tagsRoot) === -1,\n        })\n        let tags = getTagsFromSiteMap(siteMap)\n        let tagRoutes = fromPairs(tags.map(name => [name.toLowerCase(), []]))\n        Object.values(siteMap.routes).forEach((route) => {\n          let data = route.data\n          if (data && data.tags) {\n            data.tags.forEach(tag => {\n              tag = tag.toLowerCase()\n              if (tagRoutes[tag]) {\n                tagRoutes[tag].push(route)\n              }\n            })\n          }\n        })\n\n        return (\n          <TagIndexPage\n            blogRoot={context.blogRoot}\n            tags={tags.map(name => ({\n              name,\n              href: join(req.mountpath, name.toLowerCase()),\n              count: (tagRoutes[name] || []).length,\n            }))}\n          />\n        )\n      },\n    }),\n\n    '/:tag': route({\n      getTitle: req => req.params.tag,\n      getView: async (req, context) => {\n        let lowerCaseTag = req.params.tag.toLowerCase()\n\n        // Build a list of pages that include the tag from the site map\n        let siteMap = await req.router.resolveSiteMap(context.blogRoot, {\n          predicate: chunk =>\n            chunk.url.pathname.indexOf(context.tagsRoot) === -1,\n        })\n        let routes = []\n        Object.entries(siteMap.routes).forEach(([_, route]) => {\n          let tags = (route.data && route.data.tags) || []\n          if (tags.find(metaTag => metaTag.toLowerCase() === lowerCaseTag)) {\n            routes.push(route)\n          }\n        })\n\n        return (\n          <TagPage\n            blogRoot={context.blogRoot}\n            name={req.params.tag}\n            routes={routes}\n          />\n        )\n      },\n    }),\n  }),\n)\n\nexport default tagRoutes\n"],"sourceRoot":""}