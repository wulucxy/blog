{"version":3,"sources":["components/TagIndexPage.module.css","components/TagPage.module.css","../node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/nonIterableRest.js","components/TagIndexPage.js","components/TagPage.js","utils/getTagsFromSiteMap.js","routes/tags.js"],"names":["module","exports","TagIndexPage","TagPage","_arrayLikeToArray","arr","len","length","i","arr2","Array","_slicedToArray","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","_iterableToArrayLimit","o","minLen","n","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","props","_react_16_13_1_react_default","a","createElement","className","styles","tags","map","tag","key","href","dist_es","count","_ref","blogRoot","routes","route","url","ArticleSummary","getTagsFromSiteMap","siteMap","values","Set","concat","apply","data","tagRoutes","compose","withContext","req","context","objectSpread","tagsRoot","mountpath","mount","/","title","getView","_getView","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","router","resolveSiteMap","predicate","chunk","pathname","indexOf","sent","fromPairs","toLowerCase","forEach","abrupt","components_TagIndexPage","join","stop","_x","_x2","this","arguments","/:tag","getTitle","params","_getView2","_callee2","lowerCaseTag","_context2","entries","_ref2","find","metaTag","components_TagPage","_x3","_x4"],"mappings":"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","file":"static/js/1.9505c71e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"TagIndexPage\":\"TagIndexPage_TagIndexPage__1caoy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TagPage\":\"TagPage_TagPage__1sjgu\"};","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react'\nimport { Link } from 'react-navi'\nimport styles from './TagIndexPage.module.css'\n\nfunction TagIndexPage(props) {\n  return (\n    <div className={styles.TagIndexPage}>\n      <h1>Tags</h1>\n      <ul>\n        {props.tags.map(tag =>\n          <li key={tag.href}>\n            <Link href={tag.href}>{tag.name} ({tag.count})</Link>\n          </li>  \n        )}\n      </ul>\n    </div>\n  )\n}\n\nexport default TagIndexPage","import React from 'react'\nimport ArticleSummary from './ArticleSummary'\nimport styles from './TagPage.module.css'\n\nfunction TagPage({ blogRoot, name, routes }) {\n  return (\n    <div className={styles.TagPage}>\n      <h1>{name} posts</h1>\n      <ul>\n        {routes.map(route =>\n          <li key={route.url.href}>\n            <ArticleSummary blogRoot={blogRoot} route={route} />\n          </li>  \n        )}\n      </ul>\n    </div>\n  )\n}\n\nexport default TagPage","/**\n * Returns an object mapping the URL of each of the site's pages to it's `title`\n * and `meta` objects.\n *\n * This object can be computed at runtime given a `router`, or read from a\n * global `pageDetailsMap` object. This allows for access to the page map during\n * development, while also allowing production builds to use a prebuilt copy.\n */\nfunction getTagsFromSiteMap(siteMap) {\n  let routes = Object.values(siteMap.routes)\n  return Array.from(\n    new Set(\n      [].concat.apply(\n        [],\n        routes.map(route => (route.data && route.data.tags) || []),\n      ),\n    ),\n  )\n}\n\nexport default getTagsFromSiteMap\n","import React from 'react'\nimport { compose, mount, route, withContext } from 'navi'\nimport { join } from 'path'\nimport { fromPairs } from 'lodash'\nimport TagIndexPage from '../components/TagIndexPage'\nimport TagPage from '../components/TagPage'\nimport getTagsFromSiteMap from '../utils/getTagsFromSiteMap'\n\nconst tagRoutes = compose(\n  withContext((req, context) => ({\n    ...context,\n    tagsRoot: req.mountpath,\n  })),\n  mount({\n    '/': route({\n      title: 'Tags',\n\n      getView: async (req, context) => {\n        // Build a list of pages for each tag\n        let siteMap = await req.router.resolveSiteMap(context.blogRoot, {\n          predicate: chunk =>\n            chunk.url.pathname.indexOf(context.tagsRoot) === -1,\n        })\n        let tags = getTagsFromSiteMap(siteMap)\n        let tagRoutes = fromPairs(tags.map(name => [name.toLowerCase(), []]))\n        Object.values(siteMap.routes).forEach((route) => {\n          let data = route.data\n          if (data && data.tags) {\n            data.tags.forEach(tag => {\n              tag = tag.toLowerCase()\n              if (tagRoutes[tag]) {\n                tagRoutes[tag].push(route)\n              }\n            })\n          }\n        })\n\n        return (\n          <TagIndexPage\n            blogRoot={context.blogRoot}\n            tags={tags.map(name => ({\n              name,\n              href: join(req.mountpath, name.toLowerCase()),\n              count: (tagRoutes[name] || []).length,\n            }))}\n          />\n        )\n      },\n    }),\n\n    '/:tag': route({\n      getTitle: req => req.params.tag,\n      getView: async (req, context) => {\n        let lowerCaseTag = req.params.tag.toLowerCase()\n\n        // Build a list of pages that include the tag from the site map\n        let siteMap = await req.router.resolveSiteMap(context.blogRoot, {\n          predicate: chunk =>\n            chunk.url.pathname.indexOf(context.tagsRoot) === -1,\n        })\n        let routes = []\n        Object.entries(siteMap.routes).forEach(([_, route]) => {\n          let tags = (route.data && route.data.tags) || []\n          if (tags.find(metaTag => metaTag.toLowerCase() === lowerCaseTag)) {\n            routes.push(route)\n          }\n        })\n\n        return (\n          <TagPage\n            blogRoot={context.blogRoot}\n            name={req.params.tag}\n            routes={routes}\n          />\n        )\n      },\n    }),\n  }),\n)\n\nexport default tagRoutes\n"],"sourceRoot":""}