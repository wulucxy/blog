(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{59:function(n,a,e){"use strict";function s(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}e.d(a,"a",function(){return s})},60:function(n,a,e){"use strict";function s(n,a){for(var e=0;e<a.length;e++){var s=a[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function t(n,a,e){return a&&s(n.prototype,a),e&&s(n,e),n}e.d(a,"a",function(){return t})},61:function(n,a,e){"use strict";function s(n){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}e.d(a,"a",function(){return s})},62:function(n,a,e){"use strict";function s(n){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function t(n){return(t="function"===typeof Symbol&&"symbol"===s(Symbol.iterator)?function(n){return s(n)}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":s(n)})(n)}function p(n,a){return!a||"object"!==t(a)&&"function"!==typeof a?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):a}e.d(a,"a",function(){return p})},63:function(n,a,e){"use strict";function s(n,a){return(s=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n})(n,a)}function t(n,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),a&&s(n,a)}e.d(a,"a",function(){return t})},75:function(n,a,e){"use strict";e.r(a),e.d(a,"readingTime",function(){return u}),e.d(a,"default",function(){return k}),e.d(a,"tableOfContents",function(){return d}),e.d(a,"frontMatter",function(){return g});var s=e(13),t=e(59),p=e(60),o=e(62),c=e(61),r=e(63),l=e(0),m=e.n(l),i=e(20),u={text:"14 min read",minutes:13.035,time:782100,words:2607},k=function(n){function a(n){var e;return Object(t.a)(this,a),(e=Object(o.a)(this,Object(c.a)(a).call(this,n))).layout=null,e}return Object(r.a)(a,n),Object(p.a)(a,[{key:"render",value:function(){var n=this.props,a=n.components;Object(s.a)(n,["components"]);return m.a.createElement(i.MDXTag,{name:"wrapper",components:a},m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"img",components:a,parentName:"p",props:{src:"https://github.com/wulucxy/blog/raw/master/src/routes/posts/2019-08-01-typescript-redux/image/ts.png",alt:"image"}})),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"TLDR: \u6587\u7ae0\u6bd4\u8f83\u957f\uff0c\u53ef\u4ee5\u8df3\u8fc7\u76f4\u63a5",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"strong",props:{href:"https://wulucxy.github.io/redux-typescript-guide/"}},"\u67e5\u770b Demo"))),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"\u524d\u8a00"}},"\u524d\u8a00"),m.a.createElement(i.MDXTag,{name:"p",components:a},"typescript \u662f\u4e00\u4e2a\u6709\u7740\u7c7b\u578b\u5b9a\u4e49\u7684 js \u8bed\u8a00\u7684\u8d85\u96c6\u3002typescript \u652f\u6301\u6700\u65b0\u7684 ESMAScript \u7279\u6027\uff0c\u5e76\u4e14\u652f\u6301\u6cdb\u578b\u3001\u7c7b\u578b\u5b9a\u4e49\u7b49\u9759\u6001\u8bed\u8a00\u7279\u5f81\uff0c",m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"\u662f\u4e3a\u4e86\u5927\u89c4\u6a21\u5e94\u7528\u800c\u751f"),"\u3002\u6211\u4eec\u56e2\u961f\u4e4b\u524d\u5728\u5185\u90e8\u4e00\u4e9b\u9879\u76ee\u4e2d\u521d\u6b65\u5c1d\u8bd5\u4e86 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"React + Redux + TypeScript")," \u7ec4\u5408\u3002\u672c\u6587\u5219\u5c1d\u8bd5\u68b3\u7406\u57fa\u4e8e ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u5982\u4f55\u66f4\u5408\u7406\u7684\u67b6\u6784 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"redux"),"\u3002"),m.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u4e00-\u73af\u5883\u914d\u7f6e"}},"\u4e00. \u73af\u5883\u914d\u7f6e"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5f53\u524d ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ts + react")," \u9879\u76ee\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a"),m.a.createElement(i.MDXTag,{name:"ul",components:a},m.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"\u7f16\u8bd1\uff1a@babel/preset-typescript"),m.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"\u5f00\u53d1\u3001\u6253\u5305\uff1aparcel"),m.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ul"},"\u8bed\u6cd5\u6821\u9a8c\uff1aeslint\u3001tsc")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5176\u4e2d\u5f15\u5165 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"babel/preset")," \u6765\u66ff\u4ee3 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ts-loader"),"\uff0c\u8fd9\u6837\u65e2\u89e3\u51b3\u4e86 ts \u5de5\u7a0b\u5316\u6784\u5efa\u6548\u7387\u95ee\u9898\uff0c\u540c\u65f6\u4e0d\u5f71\u54cd\u7c7b\u578b\u6821\u9a8c\uff0c\u8fd8\u7edf\u4e00\u4e86\u7f16\u8bd1\u5de5\u5177\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u63a5\u5165 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"babel")," \u4ee5\u540e\uff0c\u9700\u8981\u5bf9 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"tsconfig")," \u89c4\u5219\u7a0d\u4f5c\u4fee\u6539\uff0c\u6b64\u65f6 ts \u7684\u5b9a\u4f4d\u4ec5\u4ec5\u662f\u7c7b\u578b\u6821\u9a8c\uff0c\u4ee3\u7801\u7f16\u8bd1\u7684\u5de5\u4f5c\u5c31\u5b8c\u5168\u4ea4\u7ed9 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"babel")," \u6765\u5904\u7406\u4e86\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"tsconfig.json")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-json","data-language":"json","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token punctuation">{</span>\n  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// \u89e3\u6790\u4e3a\u6700\u65b0\u7248\u672c\u7684es\u7248\u672c\uff0cbabel \u8d1f\u8d23\u540e\u7eed\u7684\u7f16\u8bd1</span>\n    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span>\n    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span>\n    <span class="token comment">// ts \u7684\u89e3\u6790\u89c4\u5219</span>\n    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"esnext"</span><span class="token punctuation">,</span> <span class="token string">"dom"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u7edd\u5bf9\u5730\u5740\u6309\u7167 node_modules \u89e3\u6790</span>\n    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u5f00\u542f jsx</span>\n    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u4e0d\u6267\u884c\u6784\u5efa\uff0c\u4ea4\u7531 babel \u6267\u884c</span>\n    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u4e25\u683c\u6a21\u5f0f\uff0c\u5305\u62ec strictNullChecks &amp; noImplicitAny.</span>\n    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u8df3\u8fc7\u4e09\u65b9\u5305\u68c0\u67e5</span>\n    <span class="token property">"skipLibCheck"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// any \u7c7b\u578b\u4e0d\u8b66\u544a</span>\n    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u5173\u95ed null \u4e25\u683c\u68c0\u67e5</span>\n    <span class="token property">"strictNullChecks"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u5c06\u6bcf\u4e2a\u6587\u4ef6\u4f5c\u4e3a\u5355\u72ec\u7684\u6a21\u5757</span>\n    <span class="token property">"isolatedModules"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// Import non-ES modules as default imports.</span>\n    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src"</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u63a5\u4e0b\u6765\u8fd8\u9700\u8981\u914d\u7f6e ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"eslint")," \u89c4\u5219\uff1a"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},".eslintrc")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-json","data-language":"json","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token punctuation">{</span>\n  <span class="token property">"parser"</span><span class="token operator">:</span> <span class="token string">"@typescript-eslint/parser"</span><span class="token punctuation">,</span>\n  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"project"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.json"</span><span class="token punctuation">,</span>\n    <span class="token property">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">2018</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"@npm/standard/react"</span><span class="token punctuation">,</span>\n    <span class="token string">"plugin:@typescript-eslint/recommended"</span><span class="token punctuation">,</span>\n    <span class="token string">"prettier"</span><span class="token punctuation">,</span>\n    <span class="token string">"prettier/@typescript-eslint"</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@typescript-eslint"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// \u81ea\u5b9a\u4e49 lint \u89c4\u5219</span>\n    <span class="token property">"react/prop-types"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token property">"@typescript-eslint/no-explicit-any"</span><span class="token operator">:</span> <span class="token string">"warn"</span>\n  <span class="token punctuation">}</span>\n <span class="token punctuation">}</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6700\u540e\u4e00\u6b65\u5c31\u662f\u5728 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"package.json")," \u91cc\u9762\u6dfb\u52a0\u811a\u672c\u547d\u4ee4\u4e86\uff1a"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"package.json")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-json","data-language":"json","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"parcel src/public/index.html --open"</span><span class="token punctuation">,</span>\n  <span class="token property">"prebuild"</span><span class="token operator">:</span> <span class="token string">"npm run build:clean"</span><span class="token punctuation">,</span>\n  <span class="token property">"build:clean"</span><span class="token operator">:</span> <span class="token string">"rimraf ./dist"</span><span class="token punctuation">,</span>\n  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"parcel build src/public/index.html --no-source-maps"</span><span class="token punctuation">,</span>\n  <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint src --fix --format codeframe"</span><span class="token punctuation">,</span>\n  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token string">"lint-staged"</span><span class="token punctuation">,</span>\n  <span class="token property">"ts-compile-check"</span><span class="token operator">:</span> <span class="token string">"tsc --pretty -p tsconfig.json"</span>\n<span class="token punctuation">}</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u4ee5\u4e0a\uff0c\u6211\u4eec\u5c31\u5b9e\u73b0\u4e86\u4e00\u5957\u5b8c\u6574\u5de5\u7a0b\u5316\u80fd\u529b\u7684 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u5f00\u53d1\u73af\u5883\u4e86\u3002"),m.a.createElement(i.MDXTag,{name:"blockquote",components:a},m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"let\u2019s RUN~~~")),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"img",components:a,parentName:"p",props:{src:"https://github.com/wulucxy/blog/raw/master/src/routes/posts/2019-08-01-typescript-redux/image/run.png",alt:"run"}})),m.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u4e8c-\u6570\u636e\u548c\u5206\u5c42"}},"\u4e8c. \u6570\u636e\u548c\u5206\u5c42"),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"1-\u76ee\u5f55\u7ed3\u6784"}},"1. \u76ee\u5f55\u7ed3\u6784"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u76ee\u5f55\u5373\u5206\u5c42\uff0c\u4e00\u4e2a\u597d\u7684\u76ee\u5f55\u7ed3\u6784\u80fd\u591f\u8ba9\u6211\u4eec\u5728\u5f00\u53d1\u4e2d\u66f4\u52a0\u5f97\u5fc3\u5e94\u624b\u3002\u5728\u5f00\u53d1 redux \u5e94\u7528\u4e2d\uff0c\u6709\u4e00\u79cd\u666e\u904d\u7684\u505a\u6cd5\u662f\u6839\u636e ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"action"),", ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"reducer")," \u529f\u80fd\u8fdb\u884c\u5206\u5c42\uff0c\u4e00\u4e2a\u5178\u578b\u7684\u5e94\u7528\u662f\u8fd9\u6837\u7684\uff1a"),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{}},".\n|-- actions             // \u5168\u5c40 action\n|-- components          // \u516c\u5171\u7ec4\u4ef6\n|   |-- Footer.tsx\n|   |-- Header.tsx\n|-- pages               // \u9875\u9762\n|   |-- home\n|      |-- components  // \u7ec4\u4ef6\u5165\u53e3  \n|      `-- index.tsx   // \u9875\u9762\u5165\u53e3 \n|-- reducers           // \u5168\u5c40 reducer\n|-- store              // store \u5165\u53e3\n|-- types.d.ts         // \u4e09\u65b9\u7c7b\u578b\u58f0\u660e\n")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u5f00\u53d1\u5f80\u5f80\u4f1a\u5728\u4e0d\u540c\u6587\u4ef6\u4e2d\u6765\u56de\u8df3\u8dc3\uff0c\u5c24\u5176\u662f\u5f53\u9879\u76ee\u6587\u4ef6\u81a8\u80c0\u4ee5\u540e\uff0c\u5728\u4e0d\u540c\u6587\u4ef6\u4e2d\u8df3\u8dc3\u5f0f\u5bfb\u627e\u4f1a\u5360\u636e\u5f88\u5927\u6bd4\u4f8b\u7684\u65f6\u95f4\u3002\u57fa\u4e8e\u6b64\uff0c\u793e\u533a\u5f00\u59cb\u6d41\u884c\u53e6\u5916\u4e00\u79cd\u5f00\u53d1\u65b9\u5f0f\uff0c\u4fd7\u79f0\u300cducks\u300d\u89c4\u5219\uff0c\u7b80\u800c\u8a00\u4e4b\u5c31\u662f\u5c06 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"action"),", ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"reducer"),"\uff0c",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"actionType")," \u653e\u5728\u4e00\u8d77\u8fdb\u884c\u7ba1\u7406\uff0c",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://github.com/erikras/ducks-modular-redux"}},"\u53c2\u8003\u94fe\u63a5"),"\u3002 \u5176\u4e2d ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ducks")," \u547d\u540d\u6765\u81ea\u4e8e",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"redux")," \u7ed3\u5c3e\u97f3\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"ducks")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{}},".\n|-- components           // \u516c\u5171\u7ec4\u4ef6\n|   |-- Footer.tsx\n|   |-- Header.tsx\n|-- pages\n|   |-- home\n|   |  |-- index.ts      // \u9875\u9762\u5165\u53e3\n|   |  |-- components    // \u7ec4\u4ef6\n|   |  |-- types.ts      // \u7c7b\u578b\u58f0\u660e\n|   |  `-- reducer.ts    // action/reducer\n|-- store                 // redux store \u5165\u53e3\n|-- types.d.ts            // \u4e09\u65b9\u7ec4\u4ef6\u7c7b\u578b\u58f0\u660e\n")),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"2-\u6570\u636e\u4e0d\u53ef\u53d8\u6027"}},"2. \u6570\u636e\u4e0d\u53ef\u53d8\u6027"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728 redux \u5f00\u53d1\u4e2d\uff0c\u9700\u8981\u9075\u5faa\u7684\u4e00\u4e2a\u539f\u5219\u662f",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"\u6570\u636e\u4e0d\u53ef\u53d8\u6027 (immutable)"),"\uff0c\u6bcf\u4e2a reducer \u4e0d\u80fd\u4fee\u6539\u539f\u59cb\u503c\uff0c\u800c\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 state\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728 \u63a5\u89e6 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u4e4b\u524d\uff0c",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://immutable-js.github.io/immutable-js/"}},"immutable.js")," \u662f\u7ed3\u5408 redux \u5b9e\u73b0\u6570\u636e\u4e0d\u53ef\u53d8\u7684\u6700\u4f73\u8f85\u52a9\u5de5\u5177\u3002\u7136\u800c\uff0c",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"immutable.js")," \u5bf9 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ts")," \u7684\u652f\u6301\u5c31\u4e00\u8a00\u96be\u5c3d\u4e86\uff0c\u8fd9\u4e24\u8005\u90fd\u662f\u5f88\u597d\u7684\u5de5\u5177\uff0c\u4f46\u662f\u653e\u5728\u4e00\u8d77\uff0c\u5374\u662f\u90a3\u4e48\u7684\u4e0d\u5408\u9002\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6240\u4ee5\u6211\u4eec\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u5c1d\u8bd5\u4e86\u4f7f\u7528 ",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://github.com/immerjs/immer"}},"immer")," \u6765\u5b9e\u73b0\u6570\u636e\u6301\u4e45\u5316\uff0c",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"immer")," \u901a\u8fc7 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"proxy")," \u5b9e\u73b0\u4e86\u7528\u539f\u751f js \u8bed\u6cd5\u5b9e\u73b0\u4e86\u6570\u636e\u4e0d\u53ef\u53d8\u3002\u867d\u7136\u5199\u8d77\u6765\u6ca1\u6709\u50cf ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"immutable.js")," \u51fd\u6570\u5f0f\u5199\u6cd5\u90a3\u4e48\u723d\uff0c\u4f46\u81f3\u5c11\u80fd\u7528\u3002"),m.a.createElement(i.MDXTag,{name:"blockquote",components:a},m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"\u540e\u7eed\uff0c\u6211\u4eec\u4ecd\u7136\u4f1a\u63a2\u7d22\u57fa\u4e8e ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"immutable.js")," \u7684 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u5199\u6cd5\uff0c\u4e0d\u518d\u672c\u6587\u8303\u7574\u4e4b\u5185\u3002")),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"3-store"}},"3. Store"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Store")," \u4e2d\u6211\u4eec\u5c06 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"reducer")," \u8fdb\u884c\u805a\u5408\uff0c\u5e76\u5bf9\u5916\u5bfc\u51fa\u5e94\u7528\u7ea7\u522b\u7684\u72b6\u6001\u6570\u636e\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"src/store/root-reducers.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token comment">// \u9875\u9762 reducer \u805a\u5408</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> ReducersMapObject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span>\n<span class="token comment">// \u5bfc\u5165\u6bcf\u4e2a\u9875\u9762\u72ec\u7acb\u7684 reducer \u548c \u7c7b\u578b\u58f0\u660e</span>\n<span class="token keyword">import</span> bitcoin <span class="token keyword">from</span> <span class="token string">"../pages/basic/reducer"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> BitcoinState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../pages/basic/types"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// \u5e94\u7528\u7ea7\u6570\u636e\u7c7b\u578b\u63a5\u53e3</span>\n<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AppState</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">bitcoin</span><span class="token operator">:</span> BitcoinState<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> <span class="token literal-property property">reducers</span><span class="token operator">:</span> ReducersMapObject <span class="token operator">=</span> <span class="token punctuation">{</span>\n  bitcoin\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> reducers \n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"src/store/create.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token comment">// \u5bfc\u5165 redux \u548c immer \u76f8\u5e94\u7684\u65b9\u6cd5</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> Reducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'redux\'</span>\n<span class="token keyword">import</span> produce <span class="token keyword">from</span> <span class="token string">"immer"</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux-immer"</span>\n\n<span class="token comment">// \u805a\u5408\u540e\u7684 reducer \u548c\u9876\u5c42\u5e94\u7528\u6570\u636e</span>\n<span class="token keyword">import</span> reducers<span class="token punctuation">,</span> <span class="token punctuation">{</span> AppState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./root-reducer"</span>\n\n<span class="token comment">// \u901a\u8fc7 combineReducer \u5c06 reducer \u5408\u5e76\u4e3a\u4e00</span>\n<span class="token comment">// \u6ce8\u610f\u8fd9\u91cc\u7684 combineReducers \u662f\u57fa\u4e8e immer \u7684\u5b9e\u73b0</span>\n<span class="token keyword">const</span> <span class="token literal-property property">rootReducer</span><span class="token operator">:</span> Reducer<span class="token operator">&lt;</span>AppState<span class="token operator">></span> <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span>produce<span class="token punctuation">,</span> reducers<span class="token punctuation">)</span>\n\n<span class="token comment">// \u5bfc\u51fa store</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">initialState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token function">createStore</span><span class="token punctuation">(</span>\n    rootReducer<span class="token punctuation">,</span>\n    initialState<span class="token punctuation">,</span>\n    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>Thunk<span class="token punctuation">,</span> promiseMiddleware<span class="token punctuation">,</span> Logger<span class="token punctuation">)</span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"4-\u58f0\u660e\u7c7b\u578b\u6587\u4ef6-dts"}},"4. \u58f0\u660e\u7c7b\u578b\u6587\u4ef6 .d.ts"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6211\u4eec\u5728\u9879\u76ee\u4e2d\u4f1a\u4f9d\u8d56\u5230\u5f88\u591a\u4e09\u65b9\u3001\u4e8c\u65b9\u5305\u4ecd\u7136\u662f\u7528\u7eaf js \u5b9e\u73b0\u7684\uff0c\u5c06\u8fd9\u4e9b\u4ee3\u7801\u91cd\u6784\u4e3a ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u663e\u7136\u662f\u4e0d\u73b0\u5b9e\u7684\uff0cts \u7684\u505a\u6cd5\u662f\u6211\u4eec\u53ef\u4ee5\u58f0\u660e ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".d.ts")," \u7c7b\u578b\u6587\u4ef6\u5c06\u4e09\u65b9\u5305\u5f15\u5165\u5230 ts \u5de5\u7a0b\u4e2d\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".d.ts")," \u4e2d ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"d")," \u7684\u542b\u4e49\u662f ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"declaration")," \u5373\u58f0\u660e\uff0c\u5b9e\u9645\u4f7f\u7528\u6211\u4eec\u65e0\u9700\u5173\u6ce8\u5177\u4f53\u5b9e\u73b0\uff0c\u800c\u53ea\u9700\u8981\u5bfc\u51fa\u7c7b\u578b\u58f0\u660e\u5373\u53ef\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6700\u7b80\u5355\u7684\u58f0\u660e\u6587\u4ef6\u662f\u8fd9\u6837\u7684\uff1a"),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{}},"declare module '@npm/r3'\n")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u4f46\u662f\u5982\u679c\u4f60\u7684\u9879\u76ee\u4e2d\u7c7b\u578b\u58f0\u660e\u975e\u5e38\u91cd\u8981\u7684\u8bdd\uff0c\u5efa\u8bae\u5230 ",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://github.com/DefinitelyTyped/DefinitelyTyped"}},"DefinitelyTyped")," \u67e5\u770b\u66f4\u591a\u4f18\u8d28\u7c7b\u578b\u5b9a\u4e49\u6587\u4ef6\uff0c\u5e76\u8d21\u732e\u81ea\u5df1\u7684\u529b\u91cf\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728\u58f0\u660e\u7c7b\u578b\u6587\u4ef6\u8fd8\u6709\u4e00\u79cd",m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"\u53d6\u5de7\u7684\u505a\u6cd5"),"\u662f\u5b9a\u4e49\u5168\u5c40\u7c7b\u578b\uff0c\u5168\u5c40\u7c7b\u578b\u65e0\u9700\u5bfc\u5165\u5373\u53ef\u5bf9\u6240\u6709\u6587\u4ef6\u53ef\u89c1\uff0c\u4e3e\u4f8b\uff1a"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"typing.d.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{}},"interface IUser {\n  name: string\n  phone: number\n}\n")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5b9a\u4e49\u597d\u4e4b\u540e\u4f60\u5728\u4efb\u610f\u6587\u4ef6\u4e2d\u90fd\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8be5\u7c7b\u578b\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5b9e\u9645\u4e0a\u8fd9\u6837\u505a\u6709\u53ef\u5546\u69b7\u4e4b\u5904\uff0c\u5728\u5bfc\u5165\u4e09\u65b9\u7c7b\u578b\u58f0\u660e\u7684\u6587\u4ef6\u4e2d\uff0c\u7528\u6765\u58f0\u660e\u5f53\u524d\u5e94\u7528\u7684\u5168\u5c40\u7c7b\u578b\u3002\u8fd9\u6837\u7684\u505a\u6cd5 ",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://stackoverflow.com/questions/42233987/how-to-configure-custom-global-interfaces-d-ts-files-for-typescript"}},"\u793e\u533a\u5e76\u4e0d\u63a8\u8350"),"\u3002\u5b9e\u9645\u4e0a\u4f60\u5e94\u8be5\u5b9a\u4e49\u4e00\u4e2a\u72ec\u7acb\u7684 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},".ts")," \u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"export/import")," \u6765\u5f15\u7528\u3002"),m.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u4e09-reducer"}},"\u4e09. reducer"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u524d\u9762\u6211\u4eec\u63d0\u5230\u5c06 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"reducer"),"\uff0c",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"action"),"\uff0c",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"actionType")," \u6309\u7167 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ducks")," \u89c4\u5219\u7edf\u4e00\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7ba1\u7406, \u5e76\u4e14\u5c06",m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"\u7c7b\u578b\u58f0\u660e"),"\u4e5f\u7edf\u4e00\u5230\u4e00\u4e2a\u6587\u4ef6\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c55\u5f00\u6765\u4ecb\u7ecd\u8fd9\u90e8\u5206\u5185\u5bb9\uff1a"),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"1-types"}},"1. types"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"actionType")," \u662f\u4e00\u79cd\u53ef\u679a\u4e3e\u7c7b\u578b\uff1a"),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">export</span> <span class="token keyword">enum</span> BitcoinActionTypes <span class="token punctuation">{</span>\n  <span class="token comment">// \u8bf7\u6c42\u6bd4\u7279\u5e01\u5468\u671f\u4ef7\u683c\u6307\u6570</span>\n  <span class="token constant">BITCOIN_QUERY_LIST</span> <span class="token operator">=</span> <span class="token string">"BITCOIN_QUERY_LIST"</span><span class="token punctuation">,</span>\n  <span class="token comment">// \u8bf7\u6c42\u6bd4\u7279\u5e01\u5f53\u524d\u4ef7\u683c</span>\n  <span class="token constant">BITCOIN_QUERY_CURRENCY</span> <span class="token operator">=</span> <span class="token string">"BITCOIN_QUERY_CURRENCY"</span><span class="token punctuation">,</span>\n  <span class="token comment">// \u8bbe\u7f6e\u5f53\u524d\u8fc7\u6ee4\u6761\u4ef6</span>\n  <span class="token constant">BITCOIN_SET_FILTER</span> <span class="token operator">=</span> <span class="token string">"BITCOIN_SET_FILTER"</span>\n<span class="token punctuation">}</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u901a\u8fc7\u679a\u4e3e\u7c7b\u578b\u7ed3\u5408 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u7684\u5f3a\u7c7b\u578b\u81ea\u52a8\u63a8\u5bfc\u80fd\u529b\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5f00\u53d1\u81ea\u52a8\u8f93\u5165\u8865\u5168\uff1a\n",m.a.createElement(i.MDXTag,{name:"img",components:a,parentName:"p",props:{src:"https://github.com/wulucxy/blog/raw/master/src/routes/posts/2019-08-01-typescript-redux/image/infer.png",alt:"enum"}})),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"2-actions"}},"2. actions"),m.a.createElement(i.MDXTag,{name:"p",components:a},"redux \u4e2d\u7684 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"action")," \u5206\u4e3a\u4e24\u7c7b\uff1a\u540c\u6b65\u548c\u5f02\u6b65\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"\u540c\u6b65 action")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> <span class="token punctuation">{</span> BitcoinActionTypes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setFilterType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">filterType</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token literal-property property">type</span><span class="token operator">:</span> BitcoinActionTypes<span class="token punctuation">.</span><span class="token constant">BITCOIN_SET_FILTER</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">payload</span><span class="token operator">:</span> <span class="token punctuation">{</span> filterType <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u501f\u52a9 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typeof")," \u5173\u952e\u8bcd\uff0c\u6211\u4eec\u5728",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"types")," \u6587\u4ef6\u4e2d\u975e\u5e38\u65b9\u4fbf\u5730\u5bfc\u51fa\u7c7b\u578b\uff1a"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"types.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> <span class="token punctuation">{</span> setFilterType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./reducer"</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> type SetFilterType <span class="token operator">=</span> <span class="token keyword">typeof</span> setFilterType<span class="token punctuation">;</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"\u5f02\u6b65 action")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728\u9879\u76ee\u4e2d\u6211\u4eec\u4f7f\u7528\u4e86 ",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://github.com/pburtchaell/redux-promise-middleware"}},"redux-promise-middleware")," \u8fdb\u884c\u5f02\u6b65 action \u7684\u7ba1\u7406\uff0c\u5f02\u6b65 action \u4f1a\u8fd4\u56de promise\uff0c\u4f46\u662f\u5199\u6cd5\u4ecd\u7136\u6cbf\u7528\u540c\u6b65 action \u7684\u5199\u6cd5\u3002"),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> <span class="token punctuation">{</span> AsyncAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux-promise-middleware"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">const</span> queryBPICurrency <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">AsyncAction</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">type</span><span class="token operator">:</span> BitcoinActionTypes<span class="token punctuation">.</span><span class="token constant">BITCOIN_QUERY_CURRENCY</span><span class="token punctuation">,</span>\n    <span class="token comment">// \u8fd9\u91cc\u8fd9\u91ccpayload \u5b9e\u9645\u8fd4\u56de\u7684\u662f promise</span>\n    <span class="token literal-property property">payload</span><span class="token operator">:</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"//api.coindesk.com/v1/bpi/currentprice/cny.json"</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6ce8\u610f\u8fd9\u91cc\u7684 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"AsyncAction")," \u6765\u81ea ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"redux-promise-middleware")," \u7684 ",m.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://github.com/pburtchaell/redux-promise-middleware/blob/master/src/index.d.ts"}},"\u7c7b\u578b\u5b9a\u4e49"),"\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u901a\u8fc7 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typeof")," \u7c7b\u578b\u63a8\u5bfc:"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"types.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> <span class="token punctuation">{</span> queryBPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./reducer"</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> type QueryBPI <span class="token operator">=</span> <span class="token keyword">typeof</span> queryBPI\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u7ed3\u679c\u5982\u4e0b\uff1a"),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{}},"type QueryBPI = (params: BPIParams) => AsyncAction\n")),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"3reducer"}},"3.reducer"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u7ed3\u5408",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"redux-promise-middleware"),"\uff0c",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"type-to-reducer")," \u548c ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"immer"),"\uff0c\u6211\u4eec\u6765\u5b8c\u6210\u5177\u5907\u7c7b\u578b\u7684 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"reducer"),"\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"types.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token comment">// state \u7c7b\u578b</span>\n<span class="token comment">// \u5176\u4e2d Record \u6cdb\u578b\u662f `{ [key: string]: T }` \u7684\u7b80\u5199</span>\n<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">BitcoinState</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">filterType</span><span class="token operator">:</span> string<span class="token punctuation">;</span>\n  <span class="token literal-property property">requestLoading</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>\n  <span class="token literal-property property">currentPrice</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> BitcoinPrice<span class="token operator">></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"reducer.ts")),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> typeToReducer <span class="token keyword">from</span> <span class="token string">"type-to-reducer"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> BitcoinActionTypes<span class="token punctuation">,</span> BPIParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// \u5bfc\u51fa reducer</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">typeToReducer</span><span class="token punctuation">(</span>\n  <span class="token comment">// \u540c\u6b65 action</span>\n  <span class="token punctuation">[</span>BitcoinActionTypes<span class="token punctuation">.</span><span class="token constant">BITCOIN_SET_FILTER</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> filterType <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>\n    <span class="token comment">// immer \u5305\u88c5\u540e\u53ef\u4ee5\u76f4\u63a5\u7528\u539f\u751f js \u4fee\u6539\u503c</span>\n    state<span class="token punctuation">.</span>filterType <span class="token operator">=</span> filterType<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> state<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// \u5f02\u6b65action</span>\n  BitcoinActionTypes<span class="token punctuation">.</span><span class="token constant">BITCOIN_QUERY_CURRENCY</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">PENDING</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      state<span class="token punctuation">.</span>requestLoading <span class="token operator">=</span> <span class="token boolean">true</span>\n      <span class="token keyword">return</span> state\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">FULFILLED</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> <span class="token punctuation">{</span> bpi <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>\n      state<span class="token punctuation">.</span>currentPrice <span class="token operator">=</span> bpi<span class="token punctuation">;</span>\n      <span class="token keyword">return</span> state<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u56db-\u8fde\u63a5\u7ec4\u4ef6"}},"\u56db. \u8fde\u63a5\u7ec4\u4ef6"),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u7c7b\u578b\u5316\u540e\u7684 redux \u8fde\u63a5\u5230 React \u7ec4\u4ef6\uff1a"),m.a.createElement(i.MDXTag,{name:"h3",components:a,props:{id:"1-connect-\u8fde\u63a5"}},"1. connect \u8fde\u63a5"),m.a.createElement(i.MDXTag,{name:"p",components:a},"react \u7ec4\u4ef6\u548c redux \u901a\u8fc7 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"react-redux")," \u7684 connect \u65b9\u6cd5\u8fdb\u884c\u8fde\u63a5\uff1a"),m.a.createElement(i.MDXTag,{name:"pre",components:a},m.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> AppState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../store/root-reducer"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// \u5bfc\u5165\u7c7b\u578b</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span>\n  SetFilterType<span class="token punctuation">,</span>\n  QueryBPICurrency<span class="token punctuation">,</span>\n  QueryBPI<span class="token punctuation">,</span>\n  BitcoinState<span class="token punctuation">,</span>\n  BPIParams\n<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./types"</span>\n\n<span class="token comment">// \u7c7b\u578b\u6269\u5c55</span>\n<span class="token keyword">interface</span> <span class="token class-name">BasicProps</span> <span class="token keyword">extends</span> <span class="token class-name">BitcoinState</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">setFilterType</span><span class="token operator">:</span> SetFilterType<span class="token punctuation">;</span>\n  <span class="token literal-property property">queryBPICurrency</span><span class="token operator">:</span> QueryBPICurrency<span class="token punctuation">;</span>\n  <span class="token literal-property property">queryBPI</span><span class="token operator">:</span> QueryBPI<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// \u8fd9\u91cc\u901a\u8fc7 Class \u7ec4\u4ef6\u5f15\u5165\u7c7b\u578b</span>\n<span class="token comment">// \u5982\u679c\u662f\u51fd\u6570\u5f0f\u7ec4\u4ef6\uff0c\u5c31\u4f7f\u7528 React.FC&lt;BasicProps> \u58f0\u660e\u7c7b\u578b</span>\n<span class="token keyword">class</span> <span class="token class-name">Basic</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>BasicProps<span class="token operator">></span><span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token comment">// do something</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// \u5c06 state \u6570\u636e\u5bfc\u51fa\u4e3a\u5c5e\u6027</span>\n<span class="token keyword">const</span> <span class="token function-variable function">select</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> AppState</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> bitcoin <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">requestLoading</span><span class="token operator">:</span> bitcoin<span class="token punctuation">.</span>requestLoading<span class="token punctuation">,</span>\n    <span class="token literal-property property">filterType</span><span class="token operator">:</span> bitcoin<span class="token punctuation">.</span>filterType<span class="token punctuation">,</span>\n    <span class="token literal-property property">currentPrice</span><span class="token operator">:</span> <span class="token function">get</span><span class="token punctuation">(</span>bitcoin<span class="token punctuation">,</span> <span class="token string">"currentPrice.CNY"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// \u6700\u540e\u4e00\u6b65\uff1a\u5b8c\u6210 redux \u548c \u7ec4\u4ef6\u7684\u8fde\u63a5</span>\n<span class="token comment">// \u987a\u4fbf\u5bfc\u5165\u4e00\u4e0b action</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>\n  select<span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    setFilterType<span class="token punctuation">,</span>\n    queryBPI<span class="token punctuation">,</span>\n    queryBPICurrency\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">(</span>Basic<span class="token punctuation">)</span>\n'}}})),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5230\u6b64\uff0c\u6211\u4eec\u5c31\u57fa\u672c\u4e0a\u5b8c\u6210\u4e86\u4e00\u4e2a ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript + redux + react")," \u7684\u5e94\u7528\uff0c",m.a.createElement(i.MDXTag,{name:"em",components:a,parentName:"p"},"\u6e90\u7801\u540e\u7eed\u4f1a\u653e\u51fa"),"\u3002"),m.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u603b\u7ed3"}},"\u603b\u7ed3"),m.a.createElement(i.MDXTag,{name:"blockquote",components:a},m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"\u8fd9 ts \u6709\u4ec0\u4e48\u7528\uff0c\u9650\u5236\u591a\uff0c\u8fd0\u884c\u6162\uff0c\u9664\u4e86\u5e26\u7ed9\u6211\u4e00\u5806\u8b66\u544a\uff0c\u8fd8\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f"),m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"ts \u7c7b\u578b\u58f0\u660e\u8fd9\u4e48\u590d\u6742\uff0c\u8fd8\u5f15\u5165\u4e86\u8fd9\u4e48\u591a\u65b0\u6982\u5ff5\uff0c\u8ddf\u6846\u67b6\u517c\u5bb9\u6027\u53c8\u8fd9\u4e48\u5dee"),m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"\u6211\u5c31\u662f\u8f9e\u804c\uff0c\u4e0d\u5199\u524d\u7aef\u4e86\uff0c\u4e5f\u7279\u4e48\u4e0d\u7528\u5de8\u786c\u9020\u7684\u5047 java"),m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"\u2026\u2026"),m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"blockquote"},"ts \u771f\u9999\uff0c\u518d\u4e5f\u4e0d\u60f3\u7528 js \u4e86\u3002")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u5b66\u4e60 ",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"typescript")," \u662f\u4e00\u6bb5\u6f2b\u957f\u7684\u65c5\u7a0b\uff0c\u5b66\u4e60 ts \u8bed\u6cd5\u5e76\u4e0d\u96be\uff0c\u96be\u7684\u662f\u6846\u67b6\u5bf9 ts \u7684\u652f\u6301\u5ea6\u3002\u4ee5 React \u4e3a\u4f8b\uff0c\u5355\u5355\u5199\u4e00\u4e2a redux \u7248\u672c\u7684\u57fa\u7840\u5e94\u7528\u5c31\u8e29\u4e86\u5f88\u591a\u5751\uff0c\u751a\u81f3\u4e3a\u4e86\u5199 ts \u4e0d\u5f97\u4e0d\u629b\u5f03\u4e86",m.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"immutable.js")," \u200a\u2014\u200a\u4e00\u4e2a\u6570\u636e\u4e0d\u53ef\u53d8\u51fd\u6570\u5f0f\u5de5\u5177\uff0c\u66f4\u4e0d\u7528\u63d0\u793e\u533a\u6570\u91cf\u7e41\u591a\u7684\u5176\u4ed6\u4e09\u65b9\u5e93\u4e86\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},"ts \u4e0d\u662f\u94f6\u5f39\uff0cts \u65e0\u6cd5\u89e3\u51b3\u4f60\u7684\u4ee3\u7801\u7ed3\u6784\u95ee\u9898\uff0c\u4e5f\u4e0d\u80fd\u907f\u514d\u8bed\u6cd5 Bug\uff0c",m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"\u201d\u5f7c\u4e4b\u871c\u7cd6,\u543e\u4e4b\u6bd2\u836f\u201c"),"\uff0c\u5f53 ts \u7c7b\u578b\u4f7f\u7528\u4e0d\u5f53\u7684\u65f6\u5019\uff0c\u5f3a\u884c\u63a5\u5165\u53cd\u800c\u4f1a\u7ed9\u4f60\u9020\u6210\u66f4\u5927\u7684\u56f0\u6270\u3002"),m.a.createElement(i.MDXTag,{name:"p",components:a},m.a.createElement(i.MDXTag,{name:"strong",components:a,parentName:"p"},"ts \u9002\u5408\u4ec0\u4e48\u573a\u666f\uff1f")),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6211\u4e2a\u4eba\u8ba4\u4e3a:"),m.a.createElement(i.MDXTag,{name:"ol",components:a},m.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"li"},"\u4e2d\u5927\u578b\u9879\u76ee\uff0c\u9700\u8981\u957f\u671f\u7ef4\u62a4\u7684\u9879\u76ee\uff0c\u5e95\u5c42\u5e93 or \u6846\u67b6")),m.a.createElement(i.MDXTag,{name:"li",components:a,parentName:"ol"},m.a.createElement(i.MDXTag,{name:"p",components:a,parentName:"li"},"\u4e0a\u4e00\u6761\u7684\u524d\u63d0\u662f\uff0c\u9879\u76ee\u4e3b\u8981\u4f9d\u8d56\u7684\u7c7b\u5e93\u5bf9 ts \u652f\u6301\u826f\u597d\uff0c\u6700\u597d\u6709\u4e1a\u754c\u7684\u5148\u884c\u6848\u4f8b"))),m.a.createElement(i.MDXTag,{name:"p",components:a},"\u6240\u4ee5\u7528\u4e00\u4e9b\u51b7\u95e8\u6846\u67b6\u6216\u8005\u5c0f\u9879\u76ee\u7684\u65f6\u5019\u6211\u662f\u4e0d\u5efa\u8bae\u4f7f\u7528 ts \u7684\uff0cts \u6ca1\u95ee\u9898\uff0c\u6846\u67b6\u4e5f\u6ca1\u95ee\u9898\uff0c\u6846\u67b6+ ts \u4f1a\u6709\u5f88\u591a\u95ee\u9898\u3002"))}}]),a}(m.a.Component),d=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{id:"\u524d\u8a00",level:3,title:"\u524d\u8a00",children:[]},{id:"\u4e00-\u73af\u5883\u914d\u7f6e",level:2,title:"\u4e00. \u73af\u5883\u914d\u7f6e",children:[]},{id:"\u4e8c-\u6570\u636e\u548c\u5206\u5c42",level:2,title:"\u4e8c. \u6570\u636e\u548c\u5206\u5c42",children:[{id:"1-\u76ee\u5f55\u7ed3\u6784",level:3,title:"1. \u76ee\u5f55\u7ed3\u6784",children:[]},{id:"2-\u6570\u636e\u4e0d\u53ef\u53d8\u6027",level:3,title:"2. \u6570\u636e\u4e0d\u53ef\u53d8\u6027",children:[]},{id:"3-store",level:3,title:"3. Store",children:[]},{id:"4-\u58f0\u660e\u7c7b\u578b\u6587\u4ef6-dts",level:3,title:"4. \u58f0\u660e\u7c7b\u578b\u6587\u4ef6 .d.ts",children:[]}]},{id:"\u4e09-reducer",level:2,title:"\u4e09. reducer",children:[{id:"1-types",level:3,title:"1. types",children:[]},{id:"2-actions",level:3,title:"2. actions",children:[]},{id:"3reducer",level:3,title:"3.reducer",children:[]}]},{id:"\u56db-\u8fde\u63a5\u7ec4\u4ef6",level:2,title:"\u56db. \u8fde\u63a5\u7ec4\u4ef6",children:[{id:"1-connect-\u8fde\u63a5",level:3,title:"1. connect \u8fde\u63a5",children:[]}]},{id:"\u603b\u7ed3",level:2,title:"\u603b\u7ed3",children:[]}]},g={}}}]);
//# sourceMappingURL=18.6ad280c0.chunk.js.map